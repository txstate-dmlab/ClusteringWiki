$().ready(function(){$("#memberForm").validate({rules:{email:{required:true,maxlength:80,email:true},password:{required:true,alphanumericonly2:true,rangelength:[3,20]},confirm_password:{required:true,equalTo:"#password"},firstname:{maxlength:30,lettersonly:true},lastname:{maxlength:30,lettersonly:true},myCaptchaResp:{requiredCaptcha:true,captchaCheck:true}},messages:{email:{email:"Please enter a valid email address"},password:{required:"Please provide a password",rangelength:"Your password must be between 3 and 20 characters long"},confirm_password:{required:"Please provide a password",equalTo:"Please enter the same password as above"}}});onEnter("email","register");onEnter("password","register");onEnter("confirm_password","register");onEnter("firstname","register");onEnter("lastname","register");$("#myCaptcha").sexyCaptcha("captcha.html")});function register(){$("#regResponse").removeClass("error").removeClass("success").html("");if(!$("#memberForm").valid()){return}$("#regResponse").html('Please wait...<img src="includes/images/loading.gif">');var d=$("#email").val();var a=$("#password").val();var c=$("#firstname").val();var b=$("#lastname").val();if(d==""||a==""){$("#regResponse").html("Email and password are required.");$("#regResponse").addClass("error");return}$.ajax({url:"register.html?applAction=register",type:"post",async:true,data:"email="+d+"&password="+a+"&firstname="+c+"&lastname="+b,dataType:"json",success:function(f){if(typeof f=="object"&&f.success==true){window.location.href="index.html"}else{var e="Invalid server response.";if(typeof f.error){e=f.error}$("#regResponse").html(e);$("#regResponse").addClass("error");e=null}d=null;a=null;c=null;b=null},error:function(f,e){$("#regResponse").html("Server connection error.  Please try again.");$("#regResponse").addClass("error")}})};